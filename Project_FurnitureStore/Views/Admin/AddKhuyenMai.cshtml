
@{
    ViewData["Title"] = "AddKhuyenMai";
    Layout = "~/Views/Admin/Index.cshtml";
}

<div class="ml-2 p-4 w-[1000px]">
    <h1 class="text-3xl font-semibold mb-4 text-center">Tạo Mới Khuyến Mãi</h1>
    <div class="bg-white p-4 rounded-lg shadow-md">

        <div class="mb-4">
            <label for="title" class="block text-gray-700 text-sm font-medium mb-2">Tên Khuyến Mãi </label>
            <input type="text" id="title" name="title" class="w-full px-4 py-2 border rounded-md">
        </div>

        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-medium mb-2" for="product-image">Hình Ảnh</label>
            <input class="w-full border rounded py-2 px-3 text-gray-700 focus:outline-none focus:ring focus:border-blue-500" id="product-image" type="file">
        </div>

        <div class="mb-4">
            <label for="start_date" class="block text-gray-700 text-sm font-medium mb-2">Ngày Bắt Đầu</label>
            <input type="date" id="start_date" name="start_date" class="w-full px-4 py-2 border rounded-md">
        </div>

        <div class="mb-4">
            <label for="end_date" class="block text-gray-700 text-sm font-medium mb-2">Ngày Kết Thúc</label>
            <input type="date" id="end_date" name="end_date" class="w-full px-4 py-2 border rounded-md">
        </div>

        <div class="mb-4">
            <label for="description" class="block text-gray-700 text-sm font-medium mb-2">Điều Kiện</label>
            <textarea id="description" name="description" class="w-full px-4 py-2 border rounded-md"></textarea>
        </div>

        <div class="mb-4">
            <label for="discount" class="block text-gray-700 text-sm font-medium mb-2">Số Tiền Giảm</label>
            <input type="number" id="discount" name="discount" class="w-full px-4 py-2 border rounded-md">
        </div>

        <div class="flex justify-end">
            <a class="ml-auto" id="sendUrll" onclick="xuLyClick()">
                <button class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-700">Tạo Khuyến Mãi</button>
            </a>
        </div>

    </div>
</div>

<script>
    function xuLyClick() {
        var tenKhuyenMai = document.getElementById('title').value;
         var productImageInput = document.getElementById('product-image');
        var productImageName = productImageInput.files[0].name; 
        var ngayBatDau = document.getElementById('start_date').value;
        var ngayKetThuc = document.getElementById('end_date').value;
        var dieuKien = document.getElementById('description').value;
        var soTienGiam = document.getElementById('discount').value;

        // Kiểm tra dữ liệu
        if (!tenKhuyenMai || !ngayBatDau || !ngayKetThuc || !dieuKien || !soTienGiam) {
            alert("Vui lòng điền đầy đủ thông tin");
            return;
        }

        // Tạo URL
        var url = '/Admin/EXAddKhuyenMai?'
            + 'tenkm=' + encodeURIComponent(tenKhuyenMai)
            + '&hinhname=' + encodeURIComponent(productImageName)
            + '&start=' + encodeURIComponent(ngayBatDau)
            + '&end=' + encodeURIComponent(ngayKetThuc)
            + '&dieukien=' + encodeURIComponent(dieuKien)
            + '&phantram=' + encodeURIComponent(soTienGiam);

        // Chuyển hướng đến URL
        window.location.href = url;
    }
</script>



 <h3 class="ml-[42px]">Voucher List</h3>
 @await Component.InvokeAsync("ListVoucher")